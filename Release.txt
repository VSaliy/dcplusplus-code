DC++ release process
====================

This document describes the steps involved in producing a DC++ release:

0) Requirements
1) Creating translation templates
2) Updating translations
3) Version update
4) Changelog update
5) Distro build (in 2 steps)
6) Check and rename the files
7) Upload the files
8) Update the web site
9) Testing -> Stable status


0) Requirements
---------------

Refer to the ``Compile.txt`` file for requirements.


1) Creating translation templates
---------------------------------

Refer to the "1) Creating translation templates" section of the ``Translations.txt`` file.

This step should occur about **1 week** before the actual release.


2) Updating translations
------------------------

Refer to the "2) Updating translations" section of the ``Translations.txt`` file.


3) Version update
-----------------

Update version numbers in:

- ``dcpp/version.h``

- ``win32/DCPlusPlus.rc``


4) Changelog update
-------------------

Set the first line of the ``changelog.txt`` file to refer to the new version. Example::

    -- 0.851 2015-04-06 --


5) Distro build (in 2 steps)
----------------------------

- Build the x64 version::

    scons arch=x64 mode=release

- Build the rest (the x64 version built above will be included in generated packages)::

    scons distro=1


6) Check and rename the files
-----------------------------

The ``build/distro`` directory should contain 4 files; check their contents:

- ``DCPlusPlus-xxx.exe``: 32-bit **and** 64-bit installer. Ensure it runs fine.

- ``DCPlusPlus-xxx.zip``: 32-bit binary arche. Should contain 8 regular files and a ``locale``
  directory with 5 files per language.

- ``DCPlusPlus-xxx-x64.zip``: 64-bit binary arche. Should contain 8 regular files and a ``locale``
  directory with 5 files per language.

- ``DCPlusPlus-xxx-src.zip``: Source code. Should be a direct extract of the DC++ repository.

**Don't forget to replace the "xxx" parts of the file names with the actual version number.**


7) Upload the files
-------------------

- Upload these 4 files to the sourceforge project, with the method of your choice (I prefer via FTP).

- Make a pass on their details once they are uploaded to indicate what they are, targeted
  platforms, etc. Also mark the installer as the preferred download on Windows.


8) Update the web site
----------------------

- Mention the new version in the ``download.html`` page of the web site. The new version should be
  marked as "testing".

- The build step should also have generated ``build/webhelp``, which can be uploaded as is to the
  corresponding directory of the DC++ website.


9) Testing -> Stable status
---------------------------

After some time (usually a week or two), the testing version can be considered stable.

- Update the web site - ``download.html`` and ``index.html`` pages.

- Update the ``version.xml`` file stored by the web site.


vim: set filetype=rst:
