From 5c5e7e1a7eb114cf136e1ae4b6a413bc48ba41eb Mon Sep 17 00:00:00 2001
From: Matt Caswell <matt@openssl.org>
Date: Thu, 8 Jan 2015 19:05:43 +0000
Subject: [PATCH] Fix build failure on Windows due to undefined cflags
 identifier

Reviewed-by: Tim Hudson <tjh@openssl.org>
---
 crypto/cversion.c  | 2 +-
 util/mkbuildinf.pl | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/crypto/cversion.c b/crypto/cversion.c
index 0336ada..881957e 100644
--- a/crypto/cversion.c
+++ b/crypto/cversion.c
@@ -77,7 +77,7 @@ const char *SSLeay_version(int t)
 	if (t == SSLEAY_CFLAGS)
 		{
 #ifdef CFLAGS
-		return(cflags);
+		return(CFLAGS);
 #else
 		return("compiler: information not available");
 #endif
diff --git a/util/mkbuildinf.pl b/util/mkbuildinf.pl
index 9d7b81c..ffa8a39 100755
--- a/util/mkbuildinf.pl
+++ b/util/mkbuildinf.pl
@@ -7,7 +7,7 @@
 print <<"END_OUTPUT";
 #ifndef MK1MF_BUILD
     /* auto-generated by util/mkbuildinf.pl for crypto/cversion.c */
-    #define CFLAGS
+    #define CFLAGS cflags
     /*
      * Generate CFLAGS as an array of individual characters. This is a
      * workaround for the situation where CFLAGS gets too long for a C90 string


